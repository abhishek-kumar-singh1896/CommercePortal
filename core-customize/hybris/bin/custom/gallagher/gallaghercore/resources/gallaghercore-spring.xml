<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved. -->
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

	<context:annotation-config />

	<!-- Spring Integration -->
	<import resource="classpath:/gallaghercore/integration/hot-folder-common-spring.xml" />

	<!-- SystemSetup for the GallagherCore -->
	<bean id="gallagherCoreSystemSetup" class="com.gallagher.core.setup.CoreSystemSetup" parent="abstractCoreSystemSetup" />

	<bean id="amB2CCategorySource" parent="abstractCategorySource">
		<property name="rootCategory" value="1" />
		<!-- '1' is the root icecat category -->
	</bean>
	<bean id="amB2CBrandCategorySource" parent="abstractCategorySource">
		<property name="rootCategory" value="brands" />
		<!-- 'brands' is the root of the brands hierarchy -->
	</bean>

	<bean id="amB2CCategoryCodeValueProvider" parent="abstractCategoryCodeValueProvider">
		<property name="categorySource" ref="amB2CCategorySource" />
	</bean>
	<bean id="amB2CBrandCategoryCodeValueProvider" parent="abstractCategoryCodeValueProvider">
		<property name="categorySource" ref="amB2CBrandCategorySource" />
	</bean>
	<bean id="amB2CCategoryNameValueProvider" parent="abstractCategoryNameValueProvider">
		<property name="categorySource" ref="amB2CCategorySource" />
	</bean>
	<bean id="amB2CBrandCategoryNameValueProvider" parent="abstractCategoryNameValueProvider">
		<property name="categorySource" ref="amB2CBrandCategorySource" />
	</bean>

	<bean id="gallagherPointOfServiceFacetDisplayNameProvider"
		class="com.enterprisewide.b2badvance.core.search.solrfacetsearch.provider.impl.PointOfServiceFacetDisplayNameProvider">
		<property name="pointOfServiceService" ref="pointOfServiceService" />
	</bean>

	<!--Url Encoder Service -->
	<alias name="gallaherUrlEncoderService" alias="urlEncoderService" />
	<bean id="gallaherUrlEncoderService" parent="defaultUrlEncoderService">
		<property name="urlEncodingAttributeManagerMap">
			<map merge="true">
				<entry key="country" value-ref="countryAttributeManager" />
			</map>
		</property>
	</bean>

	<alias name="gallaherCountryAttributeManager" alias="countryAttributeManager" />
	<bean id="gallaherCountryAttributeManager"
		class="com.gallagher.core.urlencoder.attributes.impl.GallagherCountryAttributeManager" parent="urlEncodingAttributeManager" />

	<alias name="gallagherCoreDataImportService" alias="coreDataImportService" />
	<bean id="gallagherCoreDataImportService" class="com.gallagher.core.dataimport.impl.GallagherCoreDataImportServiceImpl"
		parent="defaultCoreDataImportService" />

	<bean id="gallagherAfterSaveListener" class="com.gallagher.core.events.GallagherAfterSaveListener" />

	<bean id="gallagherCreateBaseProductCronjob" class="com.gallagher.core.jobs.GallagherCreateBaseProductCronjob"
		parent="abstractJobPerformable" />

	<bean id="gallagherProductTransformationCronjob" class="com.gallagher.core.jobs.GallagherProductTransformationCronjob"
		parent="abstractJobPerformable" />

	<bean id="gallagherProductProcessingService" class="com.gallagher.core.services.impl.GallagherProductProcessingServiceImpl" />

	<bean id="gallagherProductProcessingDao" class="com.gallagher.core.dao.impl.GallagherProductProcessingDaoImpl" />


	<alias name="GallagherDefaultFacetSearchStrategy" alias="defaultFacetSearchStrategy" />
	<bean id="GallagherDefaultFacetSearchStrategy"
		class="com.gallagher.core.search.solrfacetsearch.strategy.impl.GallagherDefaultFacetSearchStrategy"
		parent="abstractFacetSearchStrategy">
		<property name="solrSearchProviderFactory" ref="solrSearchProviderFactory" />
		<property name="facetSearchContextFactory" ref="facetSearchContextFactory" />
		<property name="facetSearchQueryConverter" ref="facetSearchQueryConverter" />
		<property name="facetSearchResultConverter" ref="facetSearchResultConverter" />
		<property name="solrIndexService" ref="solrIndexService" />
	</bean>

	<bean id="gallagherImageValueProvider"
		class="com.gallagher.core.search.solrfacetsearch.provider.impl.GallagherImageValueProvider" parent="abstractImageValueProvider" />

	<bean id="image515ValueProvider" parent="gallagherImageValueProvider">
		<property name="mediaFormat" value="515Wx515H" />
	</bean>
	<bean id="image300ValueProvider" parent="gallagherImageValueProvider">
		<property name="mediaFormat" value="300Wx300H" />
	</bean>
	<bean id="image96ValueProvider" parent="gallagherImageValueProvider">
		<property name="mediaFormat" value="96Wx96H" />
	</bean>
	<bean id="image65ValueProvider" parent="gallagherImageValueProvider">
		<property name="mediaFormat" value="65Wx65H" />
	</bean>
	<bean id="image30ValueProvider" parent="gallagherImageValueProvider">
		<property name="mediaFormat" value="30Wx30H" />
	</bean>

	<bean id="gallagherBynderSyncCronJob" class="com.gallagher.core.jobs.GallagherBynderSyncJob" parent="abstractJobPerformable" />
	<alias name="gallagherMediaContainerDao" alias="mediaContainerDao" />
	<bean id="gallagherMediaContainerDao" class="com.gallagher.core.jobs.dao.impl.GallagherMediaContainerDaoImpl"
		parent="defaultMediaContainerDao" />
	<bean id="gallagherBynderService" class="com.gallagher.core.services.impl.GallagherBynderServiceImpl" />
	<bean id="gallagherCustomerDao" class="com.gallagher.core.daos.impl.GallagherCustomerDaoImpl" />

	<bean id="gallagherCustomerService" class="com.gallagher.core.services.impl.GallagherCustomerServiceImpl" />

	<bean id="gallagherB2BCustomerRegistrationEventListener"
		class="com.gallagher.core.events.GallagherB2BCustomerRegistrationEventListener" parent="abstractAcceleratorSiteEventListener">
		<property name="modelService" ref="modelService" />
		<property name="businessProcessService" ref="businessProcessService" />
	</bean>

	<bean depends-on="processContextResolutionStrategyMap" parent="mapMergeDirective">
		<property name="key">
			<value type="java.lang.Class">de.hybris.platform.commerceservices.model.process.StoreFrontCustomerProcessModel</value>
		</property>
		<property name="value" ref="storeFrontProcessContextStrategy" />
	</bean>
	
	<bean id="glCustomerRegistrationEmailProcessDefinitionResource"
		class="de.hybris.platform.processengine.definition.ProcessDefinitionResource">
		<property name="resource" value="classpath:/gallaghercore/processes/customerRegistrationEmailProcess.xml" />
	</bean>
	
   <!-- Replace default Hybris interceptor with Gallagher specific one -->
   <bean id="gallagherCompositeEntryJobValidator" class="com.gallagher.core.cronjob.impl.GallagherCompositeEntryJobValidateInterceptor"/>
   <bean id="compositeEntryJobValidatorMapping" class="de.hybris.platform.servicelayer.interceptor.impl.InterceptorMapping">
       <property name="interceptor" ref="gallagherCompositeEntryJobValidator" />
       <property name="replacedInterceptors" ref="compositeEntryJobValidator"/>
       <property name="typeCode" value="CompositeEntry"/>
   </bean>
   
   <bean id="gallagherSiteTransactionRestrictionEvaluator" class="com.gallagher.core.restrictions.GallagherSiteTransactionRestrictionEvaluator" />
   <bean id="gallagherSiteTransactionRestrictionDynamicDescription" class="com.gallagher.core.restrictions.GallagherSiteTransactionRestrictionDynamicDescription" />
   
   <bean id="gallagherSiteTransactionRestrictionEvaluatorMapping" class="de.hybris.platform.cms2.servicelayer.services.evaluator.CMSRestrictionEvaluatorMapping">
        <property name="restrictionTypeCode" value="GallagherSiteTransactionRestriction" />
        <property name="restrictionEvaluator" ref="gallagherSiteTransactionRestrictionEvaluator" />
   </bean>
   
   <bean id="gallagherB2BUserGroupsStrategy" class="com.gallagher.core.usergroups.strategy.impl.GallagherB2BUserGroupsStrategyImpl">
   	<property name="groups">
			<list>
				<value>b2badmingroup</value>
				<value>b2bcustomergroup</value>
				<value>b2btechniciangroup</value>
			</list>
		</property>
   </bean>

	<bean id="gallagherCurrencyDao" class="com.gallagher.core.daos.impl.GallagherCurrencyDaoImpl" />
	
	<bean id="gallagherLanguageDao" class="com.gallagher.core.daos.impl.GallagherLanguageDaoImpl" />
	
	<bean id="gallagherCurrencyService" class="com.gallagher.core.services.impl.GallagherCurrencyServiceImpl" />
	
	<bean id="gallagherLanguageService" class="com.gallagher.core.services.impl.GallagherLanguageServiceImpl" />

	<alias name="gallagherMediaConversionService" alias="mediaConversionService" />
	<bean id="gallagherMediaConversionService" class="com.gallagher.core.services.impl.GallagherMediaConversionServiceImpl"
		parent="defaultMediaConversionService" />

    <!-- External Taxes -->

    <alias name="gallagherDecideExternalTaxesStrategy" alias="decideExternalTaxesStrategy"/>
    <bean id="gallagherDecideExternalTaxesStrategy"
          class="com.gallagher.core.externaltax.GallagherDecideExternalTaxesStrategy"/>

    <alias name="gallagherCalculateExternalTaxesStrategy" alias="calculateExternalTaxesStrategy"/>
    <bean id="gallagherCalculateExternalTaxesStrategy"
          class="com.gallagher.core.externaltax.GallagherCalculateExternalTaxesStrategy"/>
		

</beans>
