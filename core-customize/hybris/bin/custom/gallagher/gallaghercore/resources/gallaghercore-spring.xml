<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved. -->
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

	<context:annotation-config />

	<!-- Spring Integration -->
	<import resource="classpath:/gallaghercore/integration/hot-folder-common-spring.xml" />

	<!-- SystemSetup for the GallagherCore -->
	<bean id="gallagherCoreSystemSetup" class="com.gallagher.core.setup.CoreSystemSetup" parent="abstractCoreSystemSetup" />

	<bean id="amB2CCategorySource" parent="abstractCategorySource">
		<property name="rootCategory" value="animal-management" />
		<!-- '1' is the root icecat category -->
	</bean>
	<bean id="amB2CBrandCategorySource" parent="abstractCategorySource">
		<property name="rootCategory" value="brands" />
		<!-- 'brands' is the root of the brands hierarchy -->
	</bean>

	<bean id="amB2CCategoryCodeValueProvider" parent="abstractCategoryCodeValueProvider">
		<property name="categorySource" ref="amB2CCategorySource" />
	</bean>
	<bean id="amB2CBrandCategoryCodeValueProvider" parent="abstractCategoryCodeValueProvider">
		<property name="categorySource" ref="amB2CBrandCategorySource" />
	</bean>
	<bean id="amB2CCategoryNameValueProvider" parent="abstractCategoryNameValueProvider">
		<property name="categorySource" ref="amB2CCategorySource" />
	</bean>
	<bean id="amB2CBrandCategoryNameValueProvider" parent="abstractCategoryNameValueProvider">
		<property name="categorySource" ref="amB2CBrandCategorySource" />
	</bean>

	<bean id="gallagherPointOfServiceFacetDisplayNameProvider"
		class="com.enterprisewide.b2badvance.core.search.solrfacetsearch.provider.impl.PointOfServiceFacetDisplayNameProvider">
		<property name="pointOfServiceService" ref="pointOfServiceService" />
	</bean>

	<!--Url Encoder Service -->
	<alias name="gallaherUrlEncoderService" alias="urlEncoderService" />
	<bean id="gallaherUrlEncoderService" parent="defaultUrlEncoderService">
		<property name="urlEncodingAttributeManagerMap">
			<map merge="true">
				<entry key="country" value-ref="countryAttributeManager" />
			</map>
		</property>
	</bean>

	<alias name="gallaherCountryAttributeManager" alias="countryAttributeManager" />
	<bean id="gallaherCountryAttributeManager"
		class="com.gallagher.core.urlencoder.attributes.impl.GallagherCountryAttributeManager" parent="urlEncodingAttributeManager" />

	<alias name="gallagherCoreDataImportService" alias="coreDataImportService" />
	<bean id="gallagherCoreDataImportService" class="com.gallagher.core.dataimport.impl.GallagherCoreDataImportServiceImpl"
		parent="defaultCoreDataImportService" />

	<bean id="gallagherAfterSaveListener" class="com.gallagher.core.events.GallagherAfterSaveListener" />

	<bean id="gallagherCreateBaseProductCronjob" class="com.gallagher.core.jobs.GallagherCreateBaseProductCronjob"
		parent="abstractJobPerformable" />

	<bean id="gallagherProductTransformationCronjob" class="com.gallagher.core.jobs.GallagherProductTransformationCronjob"
		parent="abstractJobPerformable" />

	<bean id="gallagherProductProcessingService" class="com.gallagher.core.services.impl.GallagherProductProcessingServiceImpl" />

	<bean id="gallagherProductProcessingDao" class="com.gallagher.core.dao.impl.GallagherProductProcessingDaoImpl" />

	<bean id="gallagherImageValueProvider"
		class="com.gallagher.core.search.solrfacetsearch.provider.impl.GallagherImageValueProvider" parent="abstractImageValueProvider" />

	<bean id="image515ValueProvider" parent="gallagherImageValueProvider">
		<property name="mediaFormat" value="515Wx515H" />
	</bean>
	<bean id="image300ValueProvider" parent="gallagherImageValueProvider">
		<property name="mediaFormat" value="300Wx300H" />
	</bean>
	<bean id="image96ValueProvider" parent="gallagherImageValueProvider">
		<property name="mediaFormat" value="96Wx96H" />
	</bean>
	<bean id="image65ValueProvider" parent="gallagherImageValueProvider">
		<property name="mediaFormat" value="65Wx65H" />
	</bean>
	<bean id="image30ValueProvider" parent="gallagherImageValueProvider">
		<property name="mediaFormat" value="30Wx30H" />
	</bean>
	
	 <bean id="gallagherProductPriceValueProvider" class="com.gallagher.core.search.solrfacetsearch.provider.impl.GallagherProductPriceValueProvider"
          parent="productPriceValueProvider">
        <property name="productPriceRangeValueProvider" ref="productPriceRangeValueProvider" />
    </bean>

	<bean id="gallagherBynderSyncCronJob" class="com.gallagher.core.jobs.GallagherBynderSyncJob" parent="abstractJobPerformable" />
	<alias name="gallagherMediaContainerDao" alias="mediaContainerDao" />
	<bean id="gallagherMediaContainerDao" class="com.gallagher.core.jobs.dao.impl.GallagherMediaContainerDaoImpl"
		parent="defaultMediaContainerDao" />
	<bean id="gallagherBynderService" class="com.gallagher.core.services.impl.GallagherBynderServiceImpl" />
	<bean id="gallagherCustomerDao" class="com.gallagher.core.daos.impl.GallagherCustomerDaoImpl" />

	<bean id="gallagherCustomerService" class="com.gallagher.core.services.impl.GallagherCustomerServiceImpl" />

	<bean id="gallagherB2BCustomerRegistrationEventListener"
		class="com.gallagher.core.events.GallagherB2BCustomerRegistrationEventListener" parent="abstractAcceleratorSiteEventListener">
		<property name="modelService" ref="modelService" />
		<property name="businessProcessService" ref="businessProcessService" />
	</bean>

	<bean depends-on="processContextResolutionStrategyMap" parent="mapMergeDirective">
		<property name="key">
			<value type="java.lang.Class">de.hybris.platform.commerceservices.model.process.StoreFrontCustomerProcessModel</value>
		</property>
		<property name="value" ref="storeFrontProcessContextStrategy" />
	</bean>
	
	<bean id="glCustomerRegistrationEmailProcessDefinitionResource"
		class="de.hybris.platform.processengine.definition.ProcessDefinitionResource">
		<property name="resource" value="classpath:/gallaghercore/processes/customerRegistrationEmailProcess.xml" />
	</bean>
	
   <!-- Replace default Hybris interceptor with Gallagher specific one -->
   <bean id="gallagherCompositeEntryJobValidator" class="com.gallagher.core.cronjob.impl.GallagherCompositeEntryJobValidateInterceptor"/>
   <bean id="compositeEntryJobValidatorMapping" class="de.hybris.platform.servicelayer.interceptor.impl.InterceptorMapping">
       <property name="interceptor" ref="gallagherCompositeEntryJobValidator" />
       <property name="replacedInterceptors" ref="compositeEntryJobValidator"/>
       <property name="typeCode" value="CompositeEntry"/>
   </bean>
   
   <bean id="gallagherSiteTransactionRestrictionEvaluator" class="com.gallagher.core.restrictions.GallagherSiteTransactionRestrictionEvaluator" />
   <bean id="gallagherSiteTransactionRestrictionDynamicDescription" class="com.gallagher.core.restrictions.GallagherSiteTransactionRestrictionDynamicDescription" />
   
   <bean id="gallagherSiteTransactionRestrictionEvaluatorMapping" class="de.hybris.platform.cms2.servicelayer.services.evaluator.CMSRestrictionEvaluatorMapping">
        <property name="restrictionTypeCode" value="GallagherSiteTransactionRestriction" />
        <property name="restrictionEvaluator" ref="gallagherSiteTransactionRestrictionEvaluator" />
   </bean>
   
   <bean id="gallagherRegionRestrictionEvaluator" class="com.gallagher.core.restrictions.GallagherRegionRestrictionEvaluator" />
   <bean id="gallagherRegionRestrictionDynamicDescription" class="com.gallagher.core.restrictions.GallagherRegionRestrictionDynamicDescription" />
   
   <bean id="gallagherRegionRestrictionEvaluatorMapping" class="de.hybris.platform.cms2.servicelayer.services.evaluator.CMSRestrictionEvaluatorMapping">
        <property name="restrictionTypeCode" value="GallagherRegionRestriction" />
        <property name="restrictionEvaluator" ref="gallagherRegionRestrictionEvaluator" />
   </bean>
   
   <bean id="gallagherB2BUserGroupsStrategy" class="com.gallagher.core.usergroups.strategy.impl.GallagherB2BUserGroupsStrategyImpl">
   	<property name="groups">
			<list>
				<value>b2badmingroup</value>
				<value>b2bcustomergroup</value>
				<value>b2btechniciangroup</value>
			</list>
		</property>
   </bean>

	<bean id="gallagherCurrencyDao" class="com.gallagher.core.daos.impl.GallagherCurrencyDaoImpl" />
	
	<bean id="gallagherLanguageDao" class="com.gallagher.core.daos.impl.GallagherLanguageDaoImpl" />
	
	<bean id="gallagherCurrencyService" class="com.gallagher.core.services.impl.GallagherCurrencyServiceImpl" />
	
	<bean id="gallagherLanguageService" class="com.gallagher.core.services.impl.GallagherLanguageServiceImpl" />

	<alias name="gallagherMediaConversionService" alias="mediaConversionService" />
	<bean id="gallagherMediaConversionService" class="com.gallagher.core.services.impl.GallagherMediaConversionServiceImpl"
		parent="defaultMediaConversionService" />

    <!-- External Taxes -->

    <alias name="gallagherDecideExternalTaxesStrategy" alias="decideExternalTaxesStrategy"/>
    <bean id="gallagherDecideExternalTaxesStrategy"
          class="com.gallagher.core.externaltax.GallagherDecideExternalTaxesStrategy"/>

    <alias name="gallagherCalculateExternalTaxesStrategy" alias="calculateExternalTaxesStrategy"/>
    <bean id="gallagherCalculateExternalTaxesStrategy"
          class="com.gallagher.core.externaltax.GallagherCalculateExternalTaxesStrategy"/>
	
	<bean id="cleanUpLogsJobPerformable" parent="abstractGenericMaintenanceJobPerformable">
		<property name="maintenanceCleanupStrategy">
			<bean class="com.gallagher.core.jobs.maintenance.impl.CleanUpLogsStrategy">
				<property name="modelService" ref="modelService" />
				<property name="flexibleSearchService" ref="flexibleSearchService" />
			</bean>
		</property>
	</bean>
	
	<!-- mainenance strategy bean definitions  -->
    <bean id="cleanupCronJobsPerformable" parent="abstractGenericMaintenanceJobPerformable">
        <property name="maintenanceCleanupStrategy">
            <bean class="com.gallagher.core.jobs.maintenance.impl.GallagherCleanupCronJobStrategy">
                <property name="modelService" ref="modelService"/>
                <property name="typeService" ref="typeService"/>
                <property name="status">
                    <set>
                        <value type="de.hybris.platform.cronjob.enums.CronJobStatus">FINISHED</value>
                        <value type="de.hybris.platform.cronjob.enums.CronJobStatus">ABORTED</value>
                    </set>
                </property>
                <property name="result">
                    <set>
                        <value type="de.hybris.platform.cronjob.enums.CronJobResult">SUCCESS</value>
                        <value type="de.hybris.platform.cronjob.enums.CronJobResult">FAILURE</value>
                        <value type="de.hybris.platform.cronjob.enums.CronJobResult">ERROR</value>
                    </set>
                </property>
                <property name="excludedCronJobCodes">
                    <set>
                        <value>amB2CCreateBaseProductCronjob</value>
                        <value>amB2CProductTransformationCronjob</value>
                        <value>securityB2BCreateBaseProductCronjob</value>
                        <value>securityB2BProductTransformationCronjob</value>
                        <value>securityB2BBynderSyncCronJob</value>
                        <value>amB2CBynderSyncCronJob</value>
                        <value>securityB2BMediaCompositeJob</value>
                        <value>amB2CMediaCompositeJob</value>
                        <value>securityB2BBynderSyncCronJob</value>
                        <value>amB2CBynderSyncCronJob</value>
                        <value>amB2CConversionMaster</value>
                        <value>SecurityMediaConversionMaster</value>
                        <value>securityB2BProductTransformationCompositeJob</value>
                        <value>amB2CProductTransformationCompositeJob</value>
                        <value>sync securityB2BNZProductCatalog:Staged->Online</value>
                        <value>sync securityB2BAUProductCatalog:Staged->Online</value>
                        <value>sync securityB2BGlobalProductCatalog:Staged->Online</value>
                        <value>sync amB2CNZProductCatalog:Staged->Online</value>
                        <value>sync amB2CAUProductCatalog:Staged->Online</value>
                        <value>sync amB2CUSProductCatalog:Staged->Online</value>
                        <value>sync amB2CCAProductCatalog:Staged->Online</value>
                        <value>sync amB2CGlobalProductCatalog:Staged->Online</value>
                        <value>sync amB2CLatAmProductCatalog:Staged->Online</value>                        
                        <value>sync amB2CMasterProductCatalog:Staged->amB2CNZProductCatalog:Staged</value>
								<value>sync amB2CMasterProductCatalog:Staged->amB2CAUProductCatalog:Staged</value>
								<value>sync amB2CMasterProductCatalog:Staged->amB2CUSProductCatalog:Staged</value>
								<value>sync amB2CMasterProductCatalog:Staged->amB2CCAProductCatalog:Staged</value>
								<value>sync amB2CMasterProductCatalog:Staged->amB2CGlobalProductCatalog:Staged</value>
								<value>sync amB2CMasterProductCatalog:Staged->amB2CLatAmProductCatalog:Staged</value>
								<value>sync securityB2BMasterProductCatalog:Staged->securityB2BNZProductCatalog:Staged</value>
								<value>sync securityB2BMasterProductCatalog:Staged->securityB2BAUProductCatalog:Staged</value>
								<value>sync securityB2BMasterProductCatalog:Staged->securityB2BGlobalProductCatalog:Staged</value>
                    </set>
                </property>
            </bean>
        </property>
    </bean>
	

    <alias name="gallagherExternalTaxesService" alias="externalTaxesService"/>
    <bean id="gallagherExternalTaxesService"
          class="com.gallagher.core.externaltax.impl.GallagherExternalTaxesService" parent="defaultExternalTaxesService" />
	
	 <!-- order -->
	<bean id="gglOrderCodeGenerator" class="de.hybris.platform.servicelayer.keygenerator.impl.PersistentKeyGenerator">
		<property name="key" value="${keygen.ggl.order.code.name}" />
		<property name="digits" value="${keygen.order.code.digits}" />
		<property name="start" value="${keygen.ggl.order.code.start}" />
		<property name="type" value="${keygen.order.code.type}" />
		<property name="template" value="${keygen.order.code.template}" />
	</bean>

	<bean id="itemUniqueAttributesValidatorMapping" class="de.hybris.platform.servicelayer.interceptor.impl.InterceptorMapping">
		<property name="interceptor" ref="UniqueAttributesValidator" />
		<property name="typeCode" value="Item" />
		<property name="order" value="2147483646"/>
	</bean>
	
	 <!-- UrlResolvers -->

    <alias name="gallagherCategoryModelUrlResolver" alias="categoryModelUrlResolver"/>
    <bean id="gallagherCategoryModelUrlResolver"
          class="com.gallagher.core.url.impl.GallagherCategoryModelUrlResolver" parent="defaultCategoryModelUrlResolver" />
    
    <alias name="gallagherProductModelUrlResolver" alias="productModelUrlResolver"/>
    <bean id="gallagherProductModelUrlResolver"
          class="com.gallagher.core.url.impl.GallagherProductModelUrlResolver" parent="defaultProductModelUrlResolver" />
	 
	 <bean id="gallagherLocationService" class="com.gallagher.core.services.impl.GallagherLocationServiceImpl"/>
	 
	 <bean id="gallagherVariantCodeValueResolver" class="com.gallagher.core.search.solrfacetsearch.provider.impl.GallagherVariantAttributeValueResolver"
		parent="abstractValueResolver">
		<property name="modelService" ref="modelService" />
		<property name="variantField" value="code" />
		<property name="qualifierProvider" ref="languageQualifierProvider" />
	</bean>
	
	<bean id="gallagherAbstractSiteMapGenerator"
	      class="com.gallagher.core.sitemap.generator.impl.GallagherAbstractSiteMapGenerator"
	      abstract="true" parent="abstractSiteMapGenerator" />
	
	<alias name="gallagherCategoryPageSiteMapGenerator" alias="categoryPageSiteMapGenerator"/>
	<bean id="gallagherCategoryPageSiteMapGenerator"
	      class="com.gallagher.core.sitemap.generator.impl.GallagherCategoryPageSiteMapGenerator"
	      parent="gallagherAbstractSiteMapGenerator">
		<property name="siteMapUrlDataConverter" ref="categoryModelToSiteMapUrlDataConverter"/>
		<property name="siteMapPageEnum" value="CATEGORY"/>
	</bean>

	<alias name="gallagherProductPageSiteMapGenerator" alias="productPageSiteMapGenerator"/>
	<bean id="gallagherProductPageSiteMapGenerator"
	      class="com.gallagher.core.sitemap.generator.impl.GallagherProductPageSiteMapGenerator"
	      parent="gallagherAbstractSiteMapGenerator">
		<property name="siteMapUrlDataConverter" ref="productModelToSiteMapUrlDataConverter"/>
		<property name="siteMapPageEnum" value="PRODUCT"/>
	</bean>

	<alias name="gallagherPointOfServicePageSiteMapGenerator" alias="pointOfServicePageSiteMapGenerator"/>
	<bean id="gallagherPointOfServicePageSiteMapGenerator"
	      class="com.gallagher.core.sitemap.generator.impl.GallagherPointOfServicePageSiteMapGenerator"
	      parent="gallagherAbstractSiteMapGenerator">
		<property name="siteMapUrlDataConverter" ref="pointOfServiceModelToSiteMapUrlDataConverter"/>
		<property name="siteMapPageEnum" value="STORE"/>
	</bean>

	<alias name="gallagherHomePageSiteMapGenerator" alias="homePageSiteMapGenerator"/>
	<bean id="gallagherHomePageSiteMapGenerator"
	      class="com.gallagher.core.sitemap.generator.impl.GallagherHomePageSiteMapGenerator"
	      parent="gallagherAbstractSiteMapGenerator">
		<property name="siteMapUrlDataConverter" ref="homepageToSiteMapUrlDataConverter"/>
		<property name="siteMapPageEnum" value="HOMEPAGE"/>
		<property name="cmsPageService" ref="cmsPageService"/>
	</bean>

	<alias name="gallagherContentPageModelSiteMapGenerator" alias="contentPageModelSiteMapGenerator"/>
	<bean id="gallagherContentPageModelSiteMapGenerator"
	      class="com.gallagher.core.sitemap.generator.impl.GallagherContentPageModelSiteMapGenerator"
	      parent="gallagherAbstractSiteMapGenerator">
		<property name="siteMapUrlDataConverter" ref="contentPageModelToSiteMapUrlDataConverter"/>
		<property name="siteMapPageEnum" value="CONTENT"/>
	</bean>

	<alias name="gallagherCategoryLandingPageSiteMapGenerator" alias="categoryLandingPageSiteMapGenerator"/>
	<bean id="gallagherCategoryLandingPageSiteMapGenerator"
	      class="com.gallagher.core.sitemap.generator.impl.GallagherCategoryLandingPageSiteMapGenerator"
	      parent="gallagherAbstractSiteMapGenerator">
		<property name="siteMapUrlDataConverter" ref="categoryModelToSiteMapUrlDataConverter"/>
		<property name="siteMapPageEnum" value="CATEGORYLANDING"/>


	</bean>
	<alias name="gallagherCustomPageSiteMapGenerator" alias="customPageSiteMapGenerator"/>
	<bean id="gallagherCustomPageSiteMapGenerator"
	      class="com.gallagher.core.sitemap.generator.impl.GallagherCustomPageSiteMapGenerator"
	      parent="gallagherAbstractSiteMapGenerator">
		<property name="siteMapUrlDataConverter" ref="customPageToSiteMapUrlDataConverter"/>
		<property name="siteMapPageEnum" value="CUSTOM"/>
	</bean>
	
	<alias alias="emailGenerationService" name="gallagherEmailGenerationService" />
	<bean id="gallagherEmailGenerationService" class="com.gallagher.core.email.impl.GallagherEmailGenerationServiceImpl" parent="defaultEmailGenerationService" />
	
	<bean id="solrStandaloneSearchProvider" class="com.gallagher.core.solrfacetsearch.solr.impl.GallagherSolrStandaloneSearchProvider"
          parent="abstractSolrSearchProvider" />

    <bean id="solrCloudSearchProvider" class="com.gallagher.core.solrfacetsearch.solr.impl.GallagherSolrCloudSearchProvider"
          parent="abstractSolrSearchProvider" />
          
    <bean id="gallagherCustomerDefaultGroupInterceptor"
	      class="com.gallagher.core.b2b.interceptor.GallagherB2BCustomerInitDefaultsInterceptor" parent="customerDefaultGroupInterceptor">
	</bean>
	
	<bean id="customerDefaultGroupInterceptorMapping"
	      class="de.hybris.platform.servicelayer.interceptor.impl.InterceptorMapping">
		<property name="interceptor" ref="gallagherCustomerDefaultGroupInterceptor"/>
		<property name="typeCode" value="B2BCustomer"/>
	</bean>
	
    <bean id="gallagherProductService" class="com.gallagher.core.product.impl.GallagherDefaultProductServiceImpl" />
	
	<bean id="europe1.manager" class="com.gallagher.core.pricefactory.GallagherEurope1PriceFactory" init-method="init" destroy-method="destroy">
		<property name="retrieveChannelStrategy" ref="retrieveChannelStrategy" />
	</bean>

	<!-- Custom Jalo Class for PriceRow -->
	<bean id="de.hybris.platform.europe1.jalo.PriceRow" class="com.gallagher.core.jalo.GallagherPriceRow" scope="prototype" />

	<!-- Custom Price Row Interceptor -->
	<alias name="gallagherPriceRowPrepareInterceptor" alias="priceRowPrepareInterceptor" />
	<bean id="gallagherPriceRowPrepareInterceptor" class="com.gallagher.core.pdt.interceptor.GallagherPriceRowPrepareInterceptor"
		parent="gallagherPdtRowPrepareInterceptor">
	</bean>

	<bean id="gallagherPdtRowPrepareInterceptor" class="com.gallagher.core.pdt.interceptor.GallagherPDTRowPrepareInterceptor"
		abstract="true" parent="pdtRowPrepareInterceptor">
	</bean>

	<bean id="priceRowPrepareInterceptorMapping" class="de.hybris.platform.servicelayer.interceptor.impl.InterceptorMapping">
		<property name="interceptor" ref="priceRowPrepareInterceptor" />
		<property name="typeCode" value="PriceRow" />
	</bean>
</beans>
